/*!
 * fullpage.js Parallax Effect Extension 0.0.6
 * https://github.com/alvarotrigo/fullPage.js
 *
 * This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distrubute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(n){window.fp_parallaxExtension=function(){function e(n){return{cover:{offsetNormal:n?0:N},reveal:{offsetNormal:n?-N:0}}}function t(n){return{cover:{offsetNormal:n?0:R},reveal:{offsetNormal:n?-R:0}}}function o(n){return n*z/100}function i(n){return n*O/100}function a(){if(F){var e=n(U).length?n(U):n(Q).first();M(e,0)}}function l(){var t=n(U).length?n(U):n(Q).first(),o=T===$,i=o?t.nextAll():t.prevAll(),a=o?t.prevAll():t.nextAll();i.each(function(){M(n(this),e(o)[T].offsetNormal,"silent")}),a.each(function(){M(n(this),0,"silent")}),n(Q).each(function(){var e=n(this).find(K);if(e.length){var t=n(this).find(W).length?n(this).find(W):n(this).find(K).first();r(t)}})}function r(e){var o=T===$,i=o?e.nextAll():e.prevAll(),a=o?e.prevAll():e.nextAll();i.each(function(){q(n(this),t(o)[T].offsetNormal,"silent")}),a.each(function(){q(n(this),0,"silent")})}function f(n,e){O=xn.width(),e&&!E.scrollBar?(m(),x()):h()}function s(n){k.destroy(),un=!1}function c(){n(L).on("setAutoScrolling",f).on("destroy",s).on("onScroll",v).on("afterResponsive",p).on("onGrab",d).on("onContinuosHorizontal",u).on("onContinuousVertical",g).on("onResize",y)}function d(n,e){e?h():mn=!0}function p(e,t){n(Z).data("final-x",0),n(Z).data("final-y",0),B=document.querySelectorAll(Q),l()}function u(e,t){gn=!0;var o="left"===t.xMovement?n(U).find(K).first():n(U).find(K).last();r(o),setTimeout(function(){k.applyHorizontal(t)})}function g(n,e){vn=!0,l(),setTimeout(function(){k.apply(e)})}function v(){!rn&&un&&(E.scrollBar||!E.autoScrolling||_.usingExtension("dragAndMove"))&&(requestAnimationFrame(S),rn=!0)}function m(){var n=".fp-bg{transition: transform "+E.scrollingSpeed+"ms "+E.easingcss3+"}.fp-slide, .fp-section{will-change: transform;transition: background-position "+E.scrollingSpeed+"ms "+E.easingcss3+";}";E.autoScrolling&&!E.scrollBar&&C(tn,n)}function x(){var n=".fp-bg-animate{ transition: all "+E.scrollingSpeed+"ms "+E.easingcss3+"}";C(an,n)}function h(){n(on).remove()}function y(){clearTimeout(hn),hn=setTimeout(A,350)}function A(){z=xn.height(),O=xn.width(),N=o(E.parallaxOptions.percentage),R=i(E.parallaxOptions.percentage),a(),l(),w(),!E.autoScrolling||E.scrollBar}function w(){n(Z).height(z)}function S(){var t=_.usingExtension("dragAndMove")?Math.abs(n.fn.fullpage.dragAndMove.getCurrentScroll()):n(window).scrollTop(),o=fn>t,i=n(U).index(Q),a=z+t;fn=t;for(var l=0;l<B.length;++l){var r=B[l],f=z+r.offsetTop;!o&&r.offsetTop<=a?i=l:o&&f>=t&&r.offsetTop<t&&B.length>l+1&&(i=l+1)}var s=z-(B[i].offsetTop-t),c=s*N/z;T!==$&&(i-=1);var d=T!==$?c:-N+c;M(n(Q).eq(i),d),i-1>=0&&M(n(B[i-1]),e(!1)[T].offsetNormal),"undefined"!=typeof B[i+1]&&M(n(B[i+1]),e(!0)[T].offsetNormal),rn=!1}function b(n){return Math.round(2*n)/2}function M(n,e,t){var o=b(e,1),i=n.find(K);if(i.length){var a=(n.index(Q),i.filter(D));n=a.length?a:i.first()}if(F)n.css({"background-position-y":o+"px"});else if(!n.hasClass(J)||n.hasClass(j)||"undefined"!=typeof t){var l=n.find(Z),r="undefined"!=typeof l.data("final-x")?l.data("final-x"):0;l.toggleClass(X,"undefined"!=typeof t).css({transform:"translate3d("+r+"px, "+o+"px, 0)"}).data("final-x",r).data("final-y",o)}}function q(n,e,t){var o=b(e,1),i=F?n:n.find(Z);if(!E.scrollBar&&E.autoScrolling||i.addClass("fp-bg-animate"),F)i.toggleClass(X,"undefined"!=typeof t).css("background-position-x",o+"px");else{var a=0,l=i.data("final-y");"none"!==l&&"undefined"!=typeof l&&(a=l),i.toggleClass(X,"undefined"!=typeof t).css({transform:"translate3d("+o+"px, "+a+"px, 0)"}).data("final-x",o).data("final-y",a)}}function I(n){return n.find(K).length?n.find(K).length>1?n.find(K):[n.find(K)]:[n]}function C(e,t){n("#"+e).length||n('<style id="'+e+'">'+t+"</style>").appendTo("head")}var T,N,R,z,O,B,F,V,k=this,H=n.fn.fullpage.getFullpageData(),E=H.options,_=H.internals,G="fullpage-wrapper",L="."+G,j="active",D="."+j,P="fp-section",Q="."+P,U=Q+D,J="fp-slide",K="."+J,W=K+D,X="fp-notransition",Y="fp-bg",Z="."+Y,$="reveal",nn="cover",en="fp-parallax-stylesheet",tn="fp-parallax-transitions",on="#"+tn,an="fp-parallax-transition-class",ln="#"+an,rn=!1,fn=0,sn=!1,cn=!1,dn=!0,pn=!0,un=!1,gn=!1,vn=!1,mn=!1,xn=n(window);!function(){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=n}(),k.apply=function(t){if(mn&&m(),!t.localIsResizing&&!E.scrollBar&&E.autoScrolling){if(g_isAboutToRewindVertical="up"!==t.yMovement&&!t.sectionIndex||t.isMovementUp&&!(t.leavingSection-1),g_isAboutToRewindVertical&&E.continuousVertical&&!vn)return void(g_isAboutToRewindVertical=!1);sn="up"===t.yMovement;var o=e(sn),i=o[T].offsetNormal;M(n(Q).eq(t.sectionIndex),0),M(n(Q).eq(t.leavingSection-1),i),dn=1===Math.abs(t.leavingSection-1-t.sectionIndex);for(var a=Math.min(t.leavingSection-1,t.sectionIndex)+1;a<Math.max(t.leavingSection-1,t.sectionIndex);a++)M(n(Q).eq(a),0,"silent")}},k.applyHorizontal=function(n){if(!n.localIsResizing&&"none"!=n.xMovement){if(V="undefined"!=typeof n.direction&&n.direction!==n.xMovement,V&&E.continuousHorizontal&&!gn)return void(V=!1);cn=V?"left"===n.direction:"left"===n.xMovement;var e=t(cn),o=e[T].offsetNormal;q(n.section.find(K).eq(n.slideIndex),0),q(n.section.find(K).eq(n.prevSlideIndex),o),pn=1===Math.abs(n.slideIndex-n.prevSlideIndex);for(var i=Math.min(n.slideIndex,n.prevSlideIndex)+1;i<Math.max(n.slideIndex,n.prevSlideIndex);i++)q(n.section.find(K).eq(i),0,"silent")}},k.init=function(){if(z=xn.height(),O=xn.width(),T=E.parallaxOptions.type,N=o(E.parallaxOptions.percentage),R=i(E.parallaxOptions.percentage),B=document.querySelectorAll(E.sectionSelector),F="background"===E.parallaxOptions.property,w(),c(),!F){var n=".fp-bg{top:0;bottom:0;width: 100%;position:absolute;z-index: -1;}.fp-section, .fp-slide, .fp-section.fp-table, .fp-slide.fp-table, .fp-section .fp-tableCell, .fp-slide .fp-tableCell {position:relative;overflow: hidden;}";C(en,n),m()}x(),a(),l(),un=!0},k.destroy=function(){h(),n(ln).remove(),N=o(0),R=i(0),l(),n(Z).height(""),n(L).off("setAutoScrolling").off("destroy").off("onScroll").off("afterResponsive").off("onGrab").off("onContinuosHorizontal").off("onContinuousVertical").off("onResize")},k.setOption=function(n,e){"offset"===n?(E.parallaxOptions.percentage=e,N=o(e),R=i(e)):"type"===n&&(E.parallaxOptions.type=e,T=e),l()};var hn;k.applyProperties=M,k.afterSlideLoads=function(){var e=F?I(n(U)):n(U).find(Z);if(e.removeClass("fp-bg-animate"),(gn||V)&&(r(n(U).find(W)),gn=!1),!pn){var o=t(cn),i=o[T].offsetNormal,a=n(U).find(W),l=cn?a.nextAll():a.prevAll();(T===$&&cn||T===nn&&!cn)&&l.each(function(){q(n(this),i,"silent")})}},k.afterLoad=function(){if((!E.scrollBar||!E.autoScrolling||_.usingExtension("dragAndMove"))&&((vn||V)&&(l(),vn=!1),!dn)){var t=e(sn),o=t[T].offsetNormal,i=sn?n(U).nextAll():n(U).prevAll();(T===$&&sn||T===nn&&!sn)&&i.each(function(){M(n(this),o,"silent")})}},k.c=_.c;var yn=k["common".charAt(0)];return"complete"===document.readyState&&yn("parallax"),n(window).on("load",function(){yn("parallax")}),k}}(jQuery);